<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <script src="js/admin-functions.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ø§Ù…Ø¹ | SODmAX Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† */
        :root {
            --admin-primary: #0066FF;
            --admin-secondary: #00D4AA;
            --admin-accent: #FF6B35;
            --admin-dark: #0A0F1C;
            --admin-card: #121828;
            --admin-text: #FFFFFF;
            --admin-text-secondary: #94A3B8;
        }
        
        .admin-container {
            display: flex;
            min-height: 100vh;
            background: var(--admin-dark);
        }
        
        /* Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± */
        .admin-sidebar {
            width: 280px;
            background: var(--admin-card);
            border-left: 1px solid rgba(255,255,255,0.1);
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }
        
        .admin-sidebar-header {
            padding: 24px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .admin-logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .admin-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--admin-primary), var(--admin-secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }
        
        .admin-logo-text {
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--admin-primary), var(--admin-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .admin-user-info {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .admin-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--admin-primary), var(--admin-secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            margin: 0 auto 15px;
        }
        
        .admin-name {
            text-align: center;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .admin-role {
            text-align: center;
            font-size: 12px;
            color: var(--admin-text-secondary);
            background: rgba(0,102,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .admin-nav {
            padding: 20px 0;
        }
        
        .admin-nav-item {
            display: flex;
            align-items: center;
            padding: 14px 24px;
            color: var(--admin-text-secondary);
            text-decoration: none;
            transition: all 0.3s;
            border-right: 3px solid transparent;
            cursor: pointer;
        }
        
        .admin-nav-item:hover {
            background: rgba(255,255,255,0.05);
            color: white;
        }
        
        .admin-nav-item.active {
            background: rgba(0,102,255,0.1);
            color: var(--admin-primary);
            border-right-color: var(--admin-primary);
        }
        
        .admin-nav-icon {
            width: 24px;
            margin-left: 12px;
            font-size: 18px;
        }
        
        .admin-nav-text {
            flex: 1;
            font-weight: 500;
        }
        
        .admin-nav-badge {
            background: var(--admin-accent);
            color: white;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        /* Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ */
        .admin-main {
            flex: 1;
            overflow-y: auto;
            max-height: 100vh;
        }
        
        .admin-header {
            background: var(--admin-card);
            padding: 20px 30px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .admin-title {
            font-size: 24px;
            font-weight: 700;
        }
        
        .admin-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .admin-content {
            padding: 30px;
        }
        
        /* Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ */
        .admin-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .admin-stat-card {
            background: linear-gradient(145deg, var(--admin-card) 0%, rgba(18,24,40,0.9) 100%);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 25px;
            position: relative;
            overflow: hidden;
        }
        
        .admin-stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, var(--admin-primary), var(--admin-secondary));
        }
        
        .admin-stat-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .admin-stat-icon {
            width: 50px;
            height: 50px;
            background: rgba(0,102,255,0.15);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--admin-primary);
        }
        
        .admin-stat-title {
            color: var(--admin-text-secondary);
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .admin-stat-value {
            font-size: 32px;
            font-weight: 800;
            color: white;
            line-height: 1;
        }
        
        .admin-stat-change {
            font-size: 13px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .change-up { color: #00C853; }
        .change-down { color: #FF3D00; }
        
        /* Ø¬Ø¯ÙˆÙ„â€ŒÙ‡Ø§ */
        .admin-table-container {
            background: var(--admin-card);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .admin-table-header {
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-table-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .admin-table-content {
            overflow-x: auto;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
        
        .admin-table th {
            background: rgba(0,102,255,0.1);
            padding: 16px 20px;
            text-align: right;
            font-weight: 600;
            color: var(--admin-primary);
            white-space: nowrap;
        }
        
        .admin-table td {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            white-space: nowrap;
        }
        
        .admin-table tr:hover {
            background: rgba(255,255,255,0.03);
        }
        
        /* Badgeâ€ŒÙ‡Ø§ */
        .admin-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .badge-success { background: rgba(0,200,83,0.2); color: #00C853; }
        .badge-warning { background: rgba(255,179,0,0.2); color: #FFB300; }
        .badge-danger { background: rgba(255,61,0,0.2); color: #FF3D00; }
        .badge-info { background: rgba(0,102,255,0.2); color: var(--admin-primary); }
        .badge-pending { background: rgba(255,179,0,0.2); color: #FFB300; }
        .badge-completed { background: rgba(0,200,83,0.2); color: #00C853; }
        
        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
        .admin-btn {
            padding: 10px 20px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .admin-btn-primary { background: var(--admin-primary); color: white; }
        .admin-btn-success { background: #00C853; color: white; }
        .admin-btn-warning { background: #FFB300; color: white; }
        .admin-btn-danger { background: #FF3D00; color: white; }
        .admin-btn-outline { background: transparent; border: 1px solid rgba(255,255,255,0.2); color: white; }
        .admin-btn-sm { padding: 6px 12px; font-size: 12px; }
        
        /* ÙØ±Ù…â€ŒÙ‡Ø§ */
        .admin-form-group {
            margin-bottom: 20px;
        }
        
        .admin-form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--admin-text-secondary);
            font-weight: 600;
            font-size: 14px;
        }
        
        .admin-form-input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            color: white;
            font-size: 14px;
        }
        
        .admin-form-input:focus {
            outline: none;
            border-color: var(--admin-primary);
        }
        
        /* ØªØ¨â€ŒÙ‡Ø§ */
        .admin-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 25px;
        }
        
        .admin-tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            color: var(--admin-text-secondary);
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .admin-tab:hover {
            color: white;
        }
        
        .admin-tab.active {
            color: var(--admin-primary);
            border-bottom-color: var(--admin-primary);
        }
        
        .admin-tab-content {
            display: none;
        }
        
        .admin-tab-content.active {
            display: block;
        }
        
        /* Ù…ÙˆØ¯Ø§Ù„ */
        .admin-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .admin-modal-overlay.active {
            display: flex;
        }
        
        .admin-modal {
            background: var(--admin-card);
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .admin-modal-header {
            padding: 25px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-modal-title {
            font-size: 20px;
            font-weight: 700;
        }
        
        .admin-modal-close {
            background: none;
            border: none;
            color: var(--admin-text-secondary);
            font-size: 28px;
            cursor: pointer;
            padding: 0;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        
        .admin-modal-close:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .admin-modal-body {
            padding: 25px;
        }
        
        .admin-modal-footer {
            padding: 25px;
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        /* Ú†Ø§Ø±Øªâ€ŒÙ‡Ø§ */
        .admin-chart-container {
            background: var(--admin-card);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .admin-chart-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        /* Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† */
        .admin-notification {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--admin-card);
            border: 1px solid rgba(255,255,255,0.1);
            border-left: 4px solid var(--admin-primary);
            border-radius: 12px;
            padding: 16px;
            min-width: 300px;
            max-width: 400px;
            z-index: 10000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: slideInLeft 0.3s ease;
        }
        
        @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification-success { border-left-color: #00C853; }
        .notification-error { border-left-color: #FF3D00; }
        .notification-warning { border-left-color: #FFB300; }
        
        /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
        @media (max-width: 1200px) {
            .admin-stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .admin-container {
                flex-direction: column;
            }
            
            .admin-sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            .admin-stats-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .admin-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± -->
        <div class="admin-sidebar">
            <div class="admin-sidebar-header">
                <div class="admin-logo">
                    <div class="admin-logo-icon">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="admin-logo-text">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</div>
                </div>
            </div>
            
            <div class="admin-user-info">
                <div class="admin-avatar">
                    <i class="fas fa-user-cog"></i>
                </div>
                <div class="admin-name" id="adminUserName">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
                <div style="text-align: center; margin-top: 10px;">
                    <span class="admin-role" id="adminUserRole">Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…</span>
                </div>
            </div>
            
            <div class="admin-nav">
                <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
                <div class="admin-nav-item active" onclick="showAdminPage('dashboard')">
                    <div class="admin-nav-icon"><i class="fas fa-tachometer-alt"></i></div>
                    <div class="admin-nav-text">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</div>
                </div>
                
                <!-- Ú©Ø§Ø±Ø¨Ø±Ø§Ù† -->
                <div class="admin-nav-item" onclick="showAdminPage('users')">
                    <div class="admin-nav-icon"><i class="fas fa-users"></i></div>
                    <div class="admin-nav-text">Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</div>
                    <div class="admin-nav-badge" id="badgeUsers">0</div>
                </div>
                
                <!-- Ù…Ø§Ù„ÛŒ -->
                <div class="admin-nav-item" onclick="showAdminPage('financial')">
                    <div class="admin-nav-icon"><i class="fas fa-wallet"></i></div>
                    <div class="admin-nav-text">Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø§Ù„ÛŒ</div>
                </div>
                
                <!-- ÙˆØ§Ø±ÛŒØ²Ù‡Ø§ -->
                <div class="admin-nav-item" onclick="showAdminPage('deposits')">
                    <div class="admin-nav-icon"><i class="fas fa-plus-circle"></i></div>
                    <div class="admin-nav-text">ÙˆØ§Ø±ÛŒØ²Ù‡Ø§</div>
                    <div class="admin-nav-badge" id="badgeDeposits">0</div>
                </div>
                
                <!-- Ø¨Ø±Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ -->
                <div class="admin-nav-item" onclick="showAdminPage('withdrawals')">
                    <div class="admin-nav-icon"><i class="fas fa-minus-circle"></i></div>
                    <div class="admin-nav-text">Ø¨Ø±Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§</div>
                    <div class="admin-nav-badge" id="badgeWithdrawals">0</div>
                </div>
                
                <!-- ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ -->
                <div class="admin-nav-item" onclick="showAdminPage('transactions')">
                    <div class="admin-nav-icon"><i class="fas fa-exchange-alt"></i></div>
                    <div class="admin-nav-text">ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</div>
                </div>
                
                <!-- Ø¨Ø§Ø²ÛŒ -->
                <div class="admin-nav-item" onclick="showAdminPage('game')">
                    <div class="admin-nav-icon"><i class="fas fa-gamepad"></i></div>
                    <div class="admin-nav-text">Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§Ø²ÛŒ</div>
                </div>
                
                <!-- Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§ -->
                <div class="admin-nav-item" onclick="showAdminPage('packages')">
                    <div class="admin-nav-icon"><i class="fas fa-shopping-cart"></i></div>
                    <div class="admin-nav-text">Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§</div>
                </div>
                
                <!-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
                <div class="admin-nav-item" onclick="showAdminPage('settings')">
                    <div class="admin-nav-icon"><i class="fas fa-cogs"></i></div>
                    <div class="admin-nav-text">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</div>
                </div>
                
                <!-- Ú¯Ø²Ø§Ø±Ø´Ø§Øª -->
                <div class="admin-nav-item" onclick="showAdminPage('reports')">
                    <div class="admin-nav-icon"><i class="fas fa-chart-bar"></i></div>
                    <div class="admin-nav-text">Ú¯Ø²Ø§Ø±Ø´Ø§Øª</div>
                </div>
                
                <!-- Ù„Ø§Ú¯â€ŒÙ‡Ø§ -->
                <div class="admin-nav-item" onclick="showAdminPage('logs')">
                    <div class="admin-nav-icon"><i class="fas fa-history"></i></div>
                    <div class="admin-nav-text">Ù„Ø§Ú¯ Ø³ÛŒØ³ØªÙ…</div>
                </div>
                
                <!-- Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³Ø§ÛŒØª -->
                <div class="admin-nav-item" onclick="window.location.href='index.html'" style="margin-top: 30px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                    <div class="admin-nav-icon"><i class="fas fa-arrow-right"></i></div>
                    <div class="admin-nav-text">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³Ø§ÛŒØª</div>
                </div>
                
                <!-- Ø®Ø±ÙˆØ¬ -->
                <div class="admin-nav-item" onclick="adminLogout()" style="color: #FF3D00;">
                    <div class="admin-nav-icon"><i class="fas fa-sign-out-alt"></i></div>
                    <div class="admin-nav-text">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³ÛŒØ³ØªÙ…</div>
                </div>
            </div>
        </div>
        
        <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
        <div class="admin-main">
            <!-- Ù‡Ø¯Ø± -->
            <div class="admin-header">
                <div class="admin-title" id="adminPageTitle">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª</div>
                <div class="admin-actions">
                    <div style="color: var(--admin-text-secondary); font-size: 14px;">
                        Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: <span id="adminLastUpdate">--:--</span>
                    </div>
                    <button class="admin-btn admin-btn-outline" onclick="refreshAdminData()">
                        <i class="fas fa-sync-alt"></i>
                        Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
                    </button>
                </div>
            </div>
            
            <!-- Ù…Ø­ØªÙˆØ§ÛŒ ØµÙØ­Ø§Øª -->
            <div class="admin-content">
                <!-- ØµÙØ­Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
                <div id="adminPageDashboard" class="admin-page active">
                    <!-- Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ -->
                    <div class="admin-stats-grid">
                        <div class="admin-stat-card">
                            <div class="admin-stat-header">
                                <div class="admin-stat-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div>
                                    <div class="admin-stat-title">Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ú©Ù„</div>
                                    <div class="admin-stat-value" id="statTotalUsers">0</div>
                                </div>
                            </div>
                            <div class="admin-stat-change change-up">
                                <i class="fas fa-arrow-up"></i>
                                <span id="statNewUsers">0</span> Ø¬Ø¯ÛŒØ¯ Ø§Ù…Ø±ÙˆØ²
                            </div>
                        </div>
                        
                        <div class="admin-stat-card">
                            <div class="admin-stat-header">
                                <div class="admin-stat-icon">
                                    <i class="fas fa-wallet"></i>
                                </div>
                                <div>
                                    <div class="admin-stat-title">Ø¯Ø±Ø¢Ù…Ø¯ Ø§Ù…Ø±ÙˆØ²</div>
                                    <div class="admin-stat-value" id="statTodayRevenue">0 USDT</div>
                                </div>
                            </div>
                            <div class="admin-stat-change change-up">
                                <i class="fas fa-arrow-up"></i>
                                <span id="statRevenueChange">0%</span> Ø±Ø´Ø¯
                            </div>
                        </div>
                        
                        <div class="admin-stat-card">
                            <div class="admin-stat-header">
                                <div class="admin-stat-icon">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div>
                                    <div class="admin-stat-title">SOD Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø´Ø¯Ù‡</div>
                                    <div class="admin-stat-value" id="statTotalMined">0</div>
                                </div>
                            </div>
                            <div class="admin-stat-change change-up">
                                <i class="fas fa-arrow-up"></i>
                                <span id="statMiningChange">0%</span> Ø±Ø´Ø¯
                            </div>
                        </div>
                        
                        <div class="admin-stat-card">
                            <div class="admin-stat-header">
                                <div class="admin-stat-icon">
                                    <i class="fas fa-exchange-alt"></i>
                                </div>
                                <div>
                                    <div class="admin-stat-title">ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</div>
                                    <div class="admin-stat-value" id="statTotalTransactions">0</div>
                                </div>
                            </div>
                            <div class="admin-stat-change">
                                <i class="fas fa-clock"></i>
                                <span id="statPendingTransactions">0</span> Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 30px;">
                        <div class="admin-chart-container">
                            <div class="admin-chart-title">Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¬Ø¯ÛŒØ¯ (Û· Ø±ÙˆØ² Ø§Ø®ÛŒØ±)</div>
                            <canvas id="chartUsers" height="200"></canvas>
                        </div>
                        <div class="admin-chart-container">
                            <div class="admin-chart-title">Ø¯Ø±Ø¢Ù…Ø¯ Ø±ÙˆØ²Ø§Ù†Ù‡ (Û· Ø±ÙˆØ² Ø§Ø®ÛŒØ±)</div>
                            <canvas id="chartRevenue" height="200"></canvas>
                        </div>
                    </div>
                    
                    <!-- Ø¢Ø®Ø±ÛŒÙ† ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ -->
                    <div class="admin-table-container">
                        <div class="admin-table-header">
                            <div class="admin-table-title">Ø¢Ø®Ø±ÛŒÙ† ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§</div>
                            <div>
                                <button class="admin-btn admin-btn-sm admin-btn-outline" onclick="loadRecentActivities()">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="admin-table-content">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Ú©Ø§Ø±Ø¨Ø±</th>
                                        <th>Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª</th>
                                        <th>Ø¬Ø²Ø¦ÛŒØ§Øª</th>
                                        <th>Ø²Ù…Ø§Ù†</th>
                                    </tr>
                                </thead>
                                <tbody id="tableRecentActivities">
                                    <tr>
                                        <td colspan="5" style="text-align: center; padding: 40px; color: var(--admin-text-secondary);">
                                            <i class="fas fa-spinner fa-spin"></i> Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- ØµÙØ­Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† -->
                <div id="adminPageUsers" class="admin-page" style="display: none;">
                    <div class="admin-table-container">
                        <div class="admin-table-header">
                            <div class="admin-table-title">Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="text" class="admin-form-input" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±..." 
                                       id="searchUserInput" style="width: 250px; padding: 8px 12px;">
                                <button class="admin-btn admin-btn-primary" onclick="searchUsers()">
                                    <i class="fas fa-search"></i> Ø¬Ø³ØªØ¬Ùˆ
                                </button>
                                <button class="admin-btn admin-btn-success" onclick="showAddUserModal()">
                                    <i class="fas fa-user-plus"></i> Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
                                </button>
                            </div>
                        </div>
                        <div class="admin-table-content">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Ø§ÛŒÙ…ÛŒÙ„</th>
                                        <th>Ù†Ø§Ù…</th>
                                        <th>USDT</th>
                                        <th>SOD</th>
                                        <th>Ø³Ø·Ø­</th>
                                        <th>Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±ÙˆØ¯</th>
                                        <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="tableUsers">
                                    <!-- Ø¨Ø§ JS Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                                </tbody>
                            </table>
                        </div>
                        <div style="padding: 20px; text-align: center;">
                            <button class="admin-btn admin-btn-outline" onclick="loadMoreUsers()" id="btnLoadMoreUsers">
                                <i class="fas fa-arrow-down"></i> Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨ÛŒØ´ØªØ± (Û²Û° Ú©Ø§Ø±Ø¨Ø±)
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- ØµÙØ­Ù‡ Ù…Ø§Ù„ÛŒ -->
                <div id="adminPageFinancial" class="admin-page" style="display: none;">
                    <div class="admin-tabs">
                        <div class="admin-tab active" onclick="showFinancialTab('summary')">Ø®Ù„Ø§ØµÙ‡ Ù…Ø§Ù„ÛŒ</div>
                        <div class="admin-tab" onclick="showFinancialTab('deposits')">ÙˆØ§Ø±ÛŒØ²Ù‡Ø§</div>
                        <div class="admin-tab" onclick="showFinancialTab('withdrawals')">Ø¨Ø±Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§</div>
                        <div class="admin-tab" onclick="showFinancialTab('gateways')">Ø¯Ø±Ú¯Ø§Ù‡â€ŒÙ‡Ø§</div>
                    </div>
                    
                    <!-- ØªØ¨ Ø®Ù„Ø§ØµÙ‡ Ù…Ø§Ù„ÛŒ -->
                    <div id="financialTabSummary" class="admin-tab-content active">
                        <div class="admin-stats-grid">
                            <div class="admin-stat-card">
                                <div class="admin-stat-title">Ú©Ù„ ÙˆØ§Ø±ÛŒØ²ÛŒâ€ŒÙ‡Ø§</div>
                                <div class="admin-stat-value" id="financialTotalDeposits">0 USDT</div>
                                <div class="admin-stat-change change-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span id="financialDepositsChange">0%</span> Ø±Ø´Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡
                                </div>
                            </div>
                            
                            <div class="admin-stat-card">
                                <div class="admin-stat-title">Ú©Ù„ Ø¨Ø±Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§</div>
                                <div class="admin-stat-value" id="financialTotalWithdrawals">0 USDT</div>
                                <div class="admin-stat-change change-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span id="financialWithdrawalsChange">0%</span> Ø±Ø´Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡
                                </div>
                            </div>
                            
                            <div class="admin-stat-card">
                                <div class="admin-stat-title">ÙØ±ÙˆØ´ Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§</div>
                                <div class="admin-stat-value" id="financialTotalSales">0 USDT</div>
                                <div class="admin-stat-change change-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span id="financialSalesChange">0%</span> Ø±Ø´Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡
                                </div>
                            </div>
                            
                            <div class="admin-stat-card">
                                <div class="admin-stat-title">Ø³ÙˆØ¯ Ø®Ø§Ù„Øµ</div>
                                <div class="admin-stat-value" id="financialNetProfit">0 USDT</div>
                                <div class="admin-stat-change change-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span id="financialProfitChange">0%</span> Ø±Ø´Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ØªØ¨ ÙˆØ§Ø±ÛŒØ²Ù‡Ø§ -->
                    <div id="financialTabDeposits" class="admin-tab-content">
                        <div class="admin-table-container">
                            <div class="admin-table-header">
                                <div class="admin-table-title">ÙˆØ§Ø±ÛŒØ²Ù‡Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
                                <button class="admin-btn admin-btn-primary" onclick="loadPendingDeposits()">
                                    <i class="fas fa-sync-alt"></i> Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
                                </button>
                            </div>
                            <div class="admin-table-content">
                                <table class="admin-table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Ú©Ø§Ø±Ø¨Ø±</th>
                                            <th>Ù…Ø¨Ù„Øº</th>
                                            <th>Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª</th>
                                            <th>ØªØ§Ø±ÛŒØ®</th>
                                            <th>Ø´Ù…Ø§Ø±Ù‡ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ</th>
                                            <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                            <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tablePendingDeposits">
                                        <!-- Ø¨Ø§ JS Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ØµÙØ­Ø§Øª Ø¯ÛŒÚ¯Ø± Ø¨Ù‡ Ù‡Ù…ÛŒÙ† ØµÙˆØ±Øª Ø§Ø¯Ø§Ù…Ù‡ Ù…ÛŒâ€ŒÛŒØ§Ø¨Ù†Ø¯ -->
                <!-- Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø­Ø¬Ù…ØŒ Ø¨Ù‚ÛŒÙ‡ ØµÙØ­Ø§Øª Ø¯Ø± Ú©Ø¯ Ø§ØµÙ„ÛŒ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯ -->
                
            </div>
        </div>
    </div>
    
    <!-- Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§ -->
    
    <!-- Ù…ÙˆØ¯Ø§Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø± -->
    <div class="admin-modal-overlay" id="modalEditUser">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <div class="admin-modal-title">ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±</div>
                <button class="admin-modal-close" onclick="closeModal('modalEditUser')">Ã—</button>
            </div>
            <div class="admin-modal-body">
                <form id="formEditUser">
                    <input type="hidden" id="editUserId">
                    <div class="admin-form-group">
                        <label class="admin-form-label">Ø§ÛŒÙ…ÛŒÙ„</label>
                        <input type="email" class="admin-form-input" id="editUserEmail" readonly>
                    </div>
                    <div class="admin-form-group">
                        <label class="admin-form-label">Ù†Ø§Ù… Ú©Ø§Ù…Ù„</label>
                        <input type="text" class="admin-form-input" id="editUserFullName">
                    </div>
                    <div class="admin-form-group">
                        <label class="admin-form-label">Ù…ÙˆØ¬ÙˆØ¯ÛŒ USDT</label>
                        <input type="number" class="admin-form-input" id="editUserUSDT" step="0.000001">
                    </div>
                    <div class="admin-form-group">
                        <label class="admin-form-label">Ù…ÙˆØ¬ÙˆØ¯ÛŒ SOD</label>
                        <input type="number" class="admin-form-input" id="editUserSOD">
                    </div>
                    <div class="admin-form-group">
                        <label class="admin-form-label">Ø³Ø·Ø­</label>
                        <input type="number" class="admin-form-input" id="editUserLevel" min="1">
                    </div>
                    <div class="admin-form-group">
                        <label class="admin-form-label">ÙˆØ¶Ø¹ÛŒØª</label>
                        <select class="admin-form-input" id="editUserStatus">
                            <option value="active">ÙØ¹Ø§Ù„</option>
                            <option value="suspended">ØªØ¹Ù„ÛŒÙ‚</option>
                            <option value="banned">Ù…Ø³Ø¯ÙˆØ¯</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="admin-modal-footer">
                <button class="admin-btn admin-btn-outline" onclick="closeModal('modalEditUser')">Ø§Ù†ØµØ±Ø§Ù</button>
                <button class="admin-btn admin-btn-primary" onclick="saveUserChanges()">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
            </div>
        </div>
    </div>
    
    <!-- Ù…ÙˆØ¯Ø§Ù„ ØªØ£ÛŒÛŒØ¯ ÙˆØ§Ø±ÛŒØ² -->
    <div class="admin-modal-overlay" id="modalConfirmDeposit">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <div class="admin-modal-title">ØªØ£ÛŒÛŒØ¯ ÙˆØ§Ø±ÛŒØ²</div>
                <button class="admin-modal-close" onclick="closeModal('modalConfirmDeposit')">Ã—</button>
            </div>
            <div class="admin-modal-body">
                <div id="depositDetailsContent">
                    <!-- Ø¨Ø§ JS Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                </div>
            </div>
            <div class="admin-modal-footer">
                <button class="admin-btn admin-btn-outline" onclick="rejectDeposit()">Ø±Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª</button>
                <button class="admin-btn admin-btn-success" onclick="approveDeposit()">ØªØ£ÛŒÛŒØ¯ ÙˆØ§Ø±ÛŒØ²</button>
            </div>
        </div>
    </div>
    
    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // ============ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ú¯Ù„ÙˆØ¨Ø§Ù„ ============
        const SUPABASE_URL = 'https://wxxhulztrxmjqftxcetp.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4eGh1bHp0cnhtanFmdHhjZXRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNzEwNDcsImV4cCI6MjA4MTY0NzA0N30.iC6Ief8aF-zw66RQRSnLxA-BmAjChQj9xy4HkJpGOA4';
        
        let supabaseClient = null;
        let currentAdmin = null;
        let usersPage = 1;
        const USERS_PER_PAGE = 20;
        let usersData = [];
        
        // ============ ÙˆÙ‚ØªÛŒ DOM Ù„ÙˆØ¯ Ø´Ø¯ ============
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('ğŸš€ Admin Dashboard loaded');
            
            // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Supabase
            supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
            await checkAdminAuth();
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
            await loadAdminData();
            await loadDashboardStats();
            await loadUsers();
            await loadRecentActivities();
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
            setInterval(updateAdminDashboard, 30000);
            
            console.log('âœ… Admin Dashboard initialized');
        });
        
        // ============ ØªÙˆØ§Ø¨Ø¹ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª ============
        async function checkAdminAuth() {
            try {
                // Ú†Ú© Ø§Ø² localStorage
                const adminData = localStorage.getItem('sodmax_admin_user');
                if (adminData) {
                    currentAdmin = JSON.parse(adminData);
                    updateAdminUI();
                    return true;
                }
                
                // Ú†Ú© Ø§Ø² Supabase Auth
                const { data: { session }, error } = await supabaseClient.auth.getSession();
                if (error) throw error;
                
                if (session?.user) {
                    const userEmail = session.user.email?.toLowerCase();
                    const adminEmails = [
                        'hamyarhf@gmail.com',
                        'admin@sodmax.com',
                        'test@admin.com'
                    ];
                    
                    if (adminEmails.includes(userEmail)) {
                        currentAdmin = {
                            id: session.user.id,
                            email: session.user.email,
                            name: session.user.user_metadata?.full_name || 'Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…',
                            role: 'super_admin'
                        };
                        
                        localStorage.setItem('sodmax_admin_user', JSON.stringify(currentAdmin));
                        updateAdminUI();
                        return true;
                    }
                }
                
                // Ø§Ú¯Ø± Ø§Ø¯Ù…ÛŒÙ† Ù†Ø¨ÙˆØ¯
                window.location.href = 'index.html';
                return false;
                
            } catch (error) {
                console.error('âŒ Admin auth error:', error);
                window.location.href = 'index.html';
                return false;
            }
        }
        
        function updateAdminUI() {
            if (!currentAdmin) return;
            
            document.getElementById('adminUserName').textContent = currentAdmin.name;
            document.getElementById('adminUserRole').textContent = 
                currentAdmin.role === 'super_admin' ? 'Ù…Ø¯ÛŒØ± Ú©Ù„' : 'Ù…Ø¯ÛŒØ±';
        }
        
        // ============ ØªÙˆØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ø§Øª ============
        function showAdminPage(pageName) {
            // Ø¢Ù¾Ø¯ÛŒØª Ù…Ù†Ùˆ
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØµÙØ­Ø§Øª
            document.querySelectorAll('.admin-page').forEach(page => {
                page.style.display = 'none';
            });
            
            // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±
            const page = document.getElementById('adminPage' + capitalizeFirstLetter(pageName));
            if (page) {
                page.style.display = 'block';
                updatePageTitle(pageName);
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØµÙØ­Ù‡
                switch(pageName) {
                    case 'dashboard':
                        loadDashboardStats();
                        break;
                    case 'users':
                        loadUsers();
                        break;
                    case 'financial':
                        loadFinancialSummary();
                        break;
                    case 'deposits':
                        loadPendingDeposits();
                        break;
                    case 'withdrawals':
                        loadPendingWithdrawals();
                        break;
                    case 'transactions':
                        loadAllTransactions();
                        break;
                    case 'game':
                        loadGameSettings();
                        break;
                    case 'packages':
                        loadSalePlans();
                        break;
                    case 'settings':
                        loadSystemSettings();
                        break;
                    case 'reports':
                        loadReports();
                        break;
                    case 'logs':
                        loadSystemLogs();
                        break;
                }
            }
        }
        
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
        
        function updatePageTitle(pageName) {
            const titles = {
                'dashboard': 'Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª',
                'users': 'Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',
                'financial': 'Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø§Ù„ÛŒ',
                'deposits': 'ÙˆØ§Ø±ÛŒØ²Ù‡Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±',
                'withdrawals': 'Ø¨Ø±Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±',
                'transactions': 'Ù‡Ù…Ù‡ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§',
                'game': 'ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø²ÛŒ',
                'packages': 'Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§',
                'settings': 'ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…',
                'reports': 'Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø¬Ø§Ù…Ø¹',
                'logs': 'Ù„Ø§Ú¯ Ø³ÛŒØ³ØªÙ…'
            };
            
            document.getElementById('adminPageTitle').textContent = titles[pageName] || 'Ù…Ø¯ÛŒØ±ÛŒØª';
        }
        
        // ============ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ============
        async function loadAdminData() {
            try {
                // Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ
                const [usersCount, depositsCount, withdrawalsCount] = await Promise.all([
                    getTotalUsersCount(),
                    getPendingDepositsCount(),
                    getPendingWithdrawalsCount()
                ]);
                
                // Ø¢Ù¾Ø¯ÛŒØª badgeÙ‡Ø§
                document.getElementById('badgeUsers').textContent = usersCount;
                document.getElementById('badgeDeposits').textContent = depositsCount;
                document.getElementById('badgeWithdrawals').textContent = withdrawalsCount;
                
            } catch (error) {
                console.error('âŒ Load admin data error:', error);
            }
        }
        
        async function loadDashboardStats() {
            try {
                const today = new Date().toISOString().split('T')[0];
                
                // Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø± Ø§Ù…Ø±ÙˆØ²
                const { data: todayStats, error } = await supabaseClient
                    .from('daily_stats')
                    .select('*')
                    .eq('date', today)
                    .single();
                
                if (!error && todayStats) {
                    document.getElementById('statTodayRevenue').textContent = 
                        formatCurrency(todayStats.total_deposits + todayStats.total_package_revenue);
                    document.getElementById('statTotalMined').textContent = 
                        formatNumber(todayStats.total_sod_mined);
                }
                
                // Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
                const totalUsers = await getTotalUsersCount();
                document.getElementById('statTotalUsers').textContent = formatNumber(totalUsers);
                
                // Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø± ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§
                const pendingTransactions = await getPendingTransactionsCount();
                document.getElementById('statPendingTransactions').textContent = pendingTransactions;
                document.getElementById('statTotalTransactions').textContent = 
                    formatNumber(await getTotalTransactionsCount());
                
                // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø²Ù…Ø§Ù†
                updateLastUpdateTime();
                
            } catch (error) {
                console.error('âŒ Load dashboard stats error:', error);
            }
        }
        
        async function loadRecentActivities() {
            try {
                const { data: activities, error } = await supabaseClient
                    .from('user_activities')
                    .select(`
                        *,
                        users (email, full_name)
                    `)
                    .order('created_at', { ascending: false })
                    .limit(10);
                
                if (error) throw error;
                
                const table = document.getElementById('tableRecentActivities');
                if (!table) return;
                
                if (!activities || activities.length === 0) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 40px; color: var(--admin-text-secondary);">
                                Ù‡ÛŒÚ† ÙØ¹Ø§Ù„ÛŒØªÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                let html = '';
                activities.forEach((activity, index) => {
                    const user = activity.users;
                    const time = new Date(activity.created_at).toLocaleTimeString('fa-IR');
                    const date = new Date(activity.created_at).toLocaleDateString('fa-IR');
                    
                    html += `
                        <tr>
                            <td>${index + 1}</td>
                            <td>
                                <div style="font-weight: 600;">${user?.email || 'Ù†Ø§Ø´Ù†Ø§Ø³'}</div>
                                <div style="font-size: 12px; color: var(--admin-text-secondary);">
                                    ${user?.full_name || ''}
                                </div>
                            </td>
                            <td>${getActivityTypeText(activity.activity_type)}</td>
                            <td>${activity.activity_data?.description || '-'}</td>
                            <td>
                                <div>${time}</div>
                                <div style="font-size: 12px; color: var(--admin-text-secondary);">${date}</div>
                            </td>
                        </tr>
                    `;
                });
                
                table.innerHTML = html;
                
            } catch (error) {
                console.error('âŒ Load recent activities error:', error);
            }
        }
        
        // ============ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ============
        async function loadUsers(searchTerm = '') {
            try {
                let query = supabaseClient
                    .from('users')
                    .select(`
                        *,
                        user_wallets(usdt_balance, sod_balance)
                    `)
                    .order('created_at', { ascending: false });
                
                if (searchTerm) {
                    query = query.or(`email.ilike.%${searchTerm}%,full_name.ilike.%${searchTerm}%`);
                }
                
                const offset = (usersPage - 1) * USERS_PER_PAGE;
                query = query.range(offset, offset + USERS_PER_PAGE - 1);
                
                const { data: users, error } = await query;
                
                if (error) throw error;
                
                usersData = users || [];
                renderUsersTable();
                
            } catch (error) {
                console.error('âŒ Load users error:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†', 'error');
            }
        }
        
        function renderUsersTable() {
            const table = document.getElementById('tableUsers');
            if (!table) return;
            
            if (usersData.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="9" style="text-align: center; padding: 40px; color: var(--admin-text-secondary);">
                            Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯
                        </td>
                    </tr>
                `;
                return;
            }
            
            let html = '';
            usersData.forEach((user, index) => {
                const wallet = user.user_wallets?.[0] || {};
                const lastLogin = user.last_login ? 
                    new Date(user.last_login).toLocaleDateString('fa-IR') : 'â€”';
                const rowNum = (usersPage - 1) * USERS_PER_PAGE + index + 1;
                
                html += `
                    <tr>
                        <td>${rowNum}</td>
                        <td>
                            <div style="font-weight: 600;">${user.email}</div>
                            <div style="font-size: 11px; color: var(--admin-text-secondary);">
                                ${user.id.substring(0, 8)}...
                            </div>
                        </td>
                        <td>${user.full_name || 'â€”'}</td>
                        <td>${formatCurrency(wallet.usdt_balance || 0)}</td>
                        <td>${formatNumber(wallet.sod_balance || 0)}</td>
                        <td>${user.level || 1}</td>
                        <td>${lastLogin}</td>
                        <td>
                            <span class="admin-badge badge-${user.status || 'active'}">
                                ${getUserStatusText(user.status)}
                            </span>
                        </td>
                        <td>
                            <div style="display: flex; gap: 5px;">
                                <button class="admin-btn admin-btn-sm admin-btn-primary" onclick="editUser('${user.id}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="admin-btn admin-btn-sm admin-btn-warning" onclick="suspendUser('${user.id}')">
                                    <i class="fas fa-pause"></i>
                                </button>
                                <button class="admin-btn admin-btn-sm admin-btn-danger" onclick="deleteUser('${user.id}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            table.innerHTML = html;
        }
        
        async function editUser(userId) {
            try {
                const { data: user, error } = await supabaseClient
                    .from('users')
                    .select(`
                        *,
                        user_wallets(usdt_balance, sod_balance)
                    `)
                    .eq('id', userId)
                    .single();
                
                if (error) throw error;
                
                const wallet = user.user_wallets?.[0] || {};
                
                document.getElementById('editUserId').value = user.id;
                document.getElementById('editUserEmail').value = user.email;
                document.getElementById('editUserFullName').value = user.full_name || '';
                document.getElementById('editUserUSDT').value = wallet.usdt_balance || 0;
                document.getElementById('editUserSOD').value = wallet.sod_balance || 0;
                document.getElementById('editUserLevel').value = user.level || 1;
                document.getElementById('editUserStatus').value = user.status || 'active';
                
                openModal('modalEditUser');
                
            } catch (error) {
                console.error('âŒ Edit user error:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±', 'error');
            }
        }
        
        async function saveUserChanges() {
            try {
                const userId = document.getElementById('editUserId').value;
                const userData = {
                    full_name: document.getElementById('editUserFullName').value,
                    level: parseInt(document.getElementById('editUserLevel').value),
                    status: document.getElementById('editUserStatus').value
                };
                
                const walletData = {
                    usdt_balance: parseFloat(document.getElementById('editUserUSDT').value) || 0,
                    sod_balance: parseInt(document.getElementById('editUserSOD').value) || 0
                };
                
                // Ø¢Ù¾Ø¯ÛŒØª Ú©Ø§Ø±Ø¨Ø±
                const { error: userError } = await supabaseClient
                    .from('users')
                    .update(userData)
                    .eq('id', userId);
                
                if (userError) throw userError;
                
                // Ø¢Ù¾Ø¯ÛŒØª Ú©ÛŒÙ Ù¾ÙˆÙ„
                const { error: walletError } = await supabaseClient
                    .from('user_wallets')
                    .update(walletData)
                    .eq('user_id', userId);
                
                if (walletError) throw walletError;
                
                closeModal('modalEditUser');
                await loadUsers();
                showNotification('ØªØºÛŒÛŒØ±Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'success');
                
            } catch (error) {
                console.error('âŒ Save user changes error:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª', 'error');
            }
        }
        
        // ============ Ù…Ø§Ù„ÛŒ ============
        async function loadFinancialSummary() {
            try {
                const today = new Date();
                const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
                
                // Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø± Ù…Ø§Ù„ÛŒ Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ
                const { data: transactions, error } = await supabaseClient
                    .from('financial_transactions')
                    .select('*')
                    .gte('created_at', firstDayOfMonth.toISOString());
                
                if (error) throw error;
                
                let totalDeposits = 0;
                let totalWithdrawals = 0;
                let totalSales = 0;
                
                transactions?.forEach(tx => {
                    if (tx.type === 'deposit' && tx.status === 'completed') {
                        totalDeposits += tx.amount;
                    } else if (tx.type === 'withdrawal' && tx.status === 'completed') {
                        totalWithdrawals += Math.abs(tx.amount);
                    } else if (tx.type === 'purchase' && tx.status === 'completed') {
                        totalSales += Math.abs(tx.amount);
                    }
                });
                
                const netProfit = totalDeposits + totalSales - totalWithdrawals;
                
                // Ø¢Ù¾Ø¯ÛŒØª UI
                document.getElementById('financialTotalDeposits').textContent = formatCurrency(totalDeposits);
                document.getElementById('financialTotalWithdrawals').textContent = formatCurrency(totalWithdrawals);
                document.getElementById('financialTotalSales').textContent = formatCurrency(totalSales);
                document.getElementById('financialNetProfit').textContent = formatCurrency(netProfit);
                
            } catch (error) {
                console.error('âŒ Load financial summary error:', error);
            }
        }
        
        async function loadPendingDeposits() {
            try {
                const { data: deposits, error } = await supabaseClient
                    .from('financial_transactions')
                    .select(`
                        *,
                        users (email, full_name)
                    `)
                    .eq('type', 'deposit')
                    .eq('status', 'pending')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                const table = document.getElementById('tablePendingDeposits');
                if (!table) return;
                
                if (!deposits || deposits.length === 0) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 40px; color: var(--admin-text-secondary);">
                                Ù‡ÛŒÚ† ÙˆØ§Ø±ÛŒØ²ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù†ÛŒØ³Øª
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                let html = '';
                deposits.forEach((deposit, index) => {
                    const user = deposit.users;
                    const date = new Date(deposit.created_at).toLocaleString('fa-IR');
                    const metadata = deposit.metadata || {};
                    
                    html += `
                        <tr>
                            <td>${index + 1}</td>
                            <td>
                                <div style="font-weight: 600;">${user?.email || 'Ù†Ø§Ø´Ù†Ø§Ø³'}</div>
                                <div style="font-size: 12px; color: var(--admin-text-secondary);">
                                    ${user?.full_name || ''}
                                </div>
                            </td>
                            <td style="font-weight: 600; color: #00C853;">${formatCurrency(deposit.amount)}</td>
                            <td>${metadata.payment_method_name || 'â€”'}</td>
                            <td>${date}</td>
                            <td>
                                <div style="font-family: monospace; font-size: 12px;">
                                    ${deposit.reference_id || 'â€”'}
                                </div>
                            </td>
                            <td>
                                <span class="admin-badge badge-pending">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</span>
                            </td>
                            <td>
                                <button class="admin-btn admin-btn-sm admin-btn-success" onclick="showConfirmDepositModal('${deposit.id}')">
                                    <i class="fas fa-check"></i> ØªØ£ÛŒÛŒØ¯
                                </button>
                                <button class="admin-btn admin-btn-sm admin-btn-danger" onclick="rejectDeposit('${deposit.id}')">
                                    <i class="fas fa-times"></i> Ø±Ø¯
                                </button>
                            </td>
                        </tr>
                    `;
                });
                
                table.innerHTML = html;
                
            } catch (error) {
                console.error('âŒ Load pending deposits error:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙˆØ§Ø±ÛŒØ²Ù‡Ø§', 'error');
            }
        }
        
        // ============ ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ============
        async function getTotalUsersCount() {
            const { count, error } = await supabaseClient
                .from('users')
                .select('count', { count: 'exact', head: true });
            
            return error ? 0 : count;
        }
        
        async function getPendingDepositsCount() {
            const { count, error } = await supabaseClient
                .from('financial_transactions')
                .select('count', { count: 'exact', head: true })
                .eq('type', 'deposit')
                .eq('status', 'pending');
            
            return error ? 0 : count;
        }
        
        async function getPendingWithdrawalsCount() {
            const { count, error } = await supabaseClient
                .from('withdrawal_requests')
                .select('count', { count: 'exact', head: true })
                .eq('status', 'pending');
            
            return error ? 0 : count;
        }
        
        async function getPendingTransactionsCount() {
            const [deposits, withdrawals] = await Promise.all([
                getPendingDepositsCount(),
                getPendingWithdrawalsCount()
            ]);
            
            return deposits + withdrawals;
        }
        
        async function getTotalTransactionsCount() {
            const { count, error } = await supabaseClient
                .from('financial_transactions')
                .select('count', { count: 'exact', head: true });
            
            return error ? 0 : count;
        }
        
        function getActivityTypeText(type) {
            const types = {
                'login': 'ÙˆØ±ÙˆØ¯',
                'mining': 'Ø§Ø³ØªØ®Ø±Ø§Ø¬',
                'purchase': 'Ø®Ø±ÛŒØ¯ Ù¾Ú©ÛŒØ¬',
                'deposit': 'ÙˆØ§Ø±ÛŒØ²',
                'withdrawal': 'Ø¨Ø±Ø¯Ø§Ø´Øª',
                'register': 'Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…',
                'boost': 'Ø§ÙØ²Ø§ÛŒØ´ Ù‚Ø¯Ø±Øª',
                'claim': 'Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´'
            };
            return types[type] || type;
        }
        
        function getUserStatusText(status) {
            const statuses = {
                'active': 'ÙØ¹Ø§Ù„',
                'suspended': 'ØªØ¹Ù„ÛŒÙ‚',
                'banned': 'Ù…Ø³Ø¯ÙˆØ¯',
                'inactive': 'ØºÛŒØ±ÙØ¹Ø§Ù„'
            };
            return statuses[status] || status;
        }
        
        function formatNumber(num) {
            if (!num && num !== 0) return '0';
            
            if (num >= 1000000000) return (num / 1000000000).toFixed(2) + 'B';
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return Math.floor(num).toLocaleString('fa-IR');
        }
        
        function formatCurrency(amount) {
            return parseFloat(amount).toFixed(6) + ' USDT';
        }
        
        function updateLastUpdateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('fa-IR');
            document.getElementById('adminLastUpdate').textContent = timeString;
        }
        
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        function showNotification(message, type = 'info') {
            // Ø­Ø°Ù Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ù‚Ø¨Ù„ÛŒ
            const existingNotification = document.querySelector('.admin-notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¬Ø¯ÛŒØ¯
            const notification = document.createElement('div');
            notification.className = `admin-notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 20px;
                background: var(--admin-card);
                border: 1px solid rgba(255,255,255,0.1);
                border-left: 4px solid ${type === 'success' ? '#00C853' : 
                                   type === 'error' ? '#FF3D00' : 
                                   type === 'warning' ? '#FFB300' : 'var(--admin-primary)'};
                border-radius: 12px;
                padding: 16px;
                min-width: 300px;
                max-width: 400px;
                z-index: 10000;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                animation: slideInLeft 0.3s ease;
            `;
            
            const icon = type === 'success' ? 'fa-check-circle' :
                        type === 'error' ? 'fa-exclamation-circle' :
                        type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle';
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="font-size: 20px; color: ${type === 'success' ? '#00C853' : 
                                                  type === 'error' ? '#FF3D00' : 
                                                  type === 'warning' ? '#FFB300' : 'var(--admin-primary)'};">
                        <i class="fas ${icon}"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; margin-bottom: 4px;">
                            ${type === 'success' ? 'Ù…ÙˆÙÙ‚' : 
                              type === 'error' ? 'Ø®Ø·Ø§' : 
                              type === 'warning' ? 'Ù‡Ø´Ø¯Ø§Ø±' : 'Ø§Ø·Ù„Ø§Ø¹'}
                        </div>
                        <div style="font-size: 14px; color: var(--admin-text-secondary);">
                            ${message}
                        </div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="background: none; border: none; color: var(--admin-text-secondary); cursor: pointer; padding: 4px;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø«Ø§Ù†ÛŒÙ‡
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
        
        function refreshAdminData() {
            loadDashboardStats();
            loadAdminData();
            showNotification('Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯', 'success');
        }
        
        function updateAdminDashboard() {
            loadDashboardStats();
            updateLastUpdateTime();
        }
        
        function adminLogout() {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ')) {
                localStorage.removeItem('sodmax_admin_user');
                window.location.href = 'index.html';
            }
        }
        
        // ØªÙˆØ§Ø¨Ø¹ Ù…Ø§Ù„ÛŒ
        async function showConfirmDepositModal(transactionId) {
            try {
                const { data: transaction, error } = await supabaseClient
                    .from('financial_transactions')
                    .select(`
                        *,
                        users (email, full_name)
                    `)
                    .eq('id', transactionId)
                    .single();
                
                if (error) throw error;
                
                const user = transaction.users;
                const metadata = transaction.metadata || {};
                
                const content = `
                    <div style="margin-bottom: 20px;">
                        <h3 style="color: white; margin-bottom: 10px;">Ø¬Ø²Ø¦ÛŒØ§Øª ÙˆØ§Ø±ÛŒØ²</h3>
                        <div style="background: rgba(0,0,0,0.1); padding: 15px; border-radius: 10px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: var(--admin-text-secondary);">Ú©Ø§Ø±Ø¨Ø±:</span>
                                <span style="font-weight: 600;">${user?.email || 'Ù†Ø§Ø´Ù†Ø§Ø³'}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: var(--admin-text-secondary);">Ù…Ø¨Ù„Øº:</span>
                                <span style="color: #00C853; font-weight: 600;">${formatCurrency(transaction.amount)}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: var(--admin-text-secondary);">Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª:</span>
                                <span>${metadata.payment_method_name || 'â€”'}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: var(--admin-text-secondary);">Ø´Ù…Ø§Ø±Ù‡ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ:</span>
                                <span style="font-family: monospace;">${transaction.reference_id || 'â€”'}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--admin-text-secondary);">ØªØ§Ø±ÛŒØ®:</span>
                                <span>${new Date(transaction.created_at).toLocaleString('fa-IR')}</span>
                            </div>
                        </div>
                    </div>
                    <div class="admin-form-group">
                        <label class="admin-form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                        <textarea class="admin-form-input" id="depositAdminNotes" rows="3" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø¶Ø§ÙÛŒ..."></textarea>
                    </div>
                    <input type="hidden" id="currentDepositId" value="${transactionId}">
                `;
                
                document.getElementById('depositDetailsContent').innerHTML = content;
                openModal('modalConfirmDeposit');
                
            } catch (error) {
                console.error('âŒ Show confirm deposit modal error:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ù†Ù…Ø§ÛŒØ´ Ø¬Ø²Ø¦ÛŒØ§Øª ÙˆØ§Ø±ÛŒØ²', 'error');
            }
        }
        
        async function approveDeposit() {
            try {
                const transactionId = document.getElementById('currentDepositId').value;
                const adminNotes = document.getElementById('depositAdminNotes').value;
                
                // Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø±Ø¯
                // Ø¨Ø§ÛŒØ¯ ØªØ±Ø§Ú©Ù†Ø´ Ø±Ø§ ØªØ£ÛŒÛŒØ¯ Ùˆ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ù‡ÛŒØ¯
                
                showNotification('ÙˆØ§Ø±ÛŒØ² ØªØ£ÛŒÛŒØ¯ Ø´Ø¯', 'success');
                closeModal('modalConfirmDeposit');
                loadPendingDeposits();
                loadDashboardStats();
                
            } catch (error) {
                console.error('âŒ Approve deposit error:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± ØªØ£ÛŒÛŒØ¯ ÙˆØ§Ø±ÛŒØ²', 'error');
            }
        }
        
        async function rejectDeposit(transactionId) {
            if (!transactionId) {
                transactionId = document.getElementById('currentDepositId')?.value;
            }
            
            if (!transactionId) return;
            
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† ÙˆØ§Ø±ÛŒØ² Ø±Ø§ Ø±Ø¯ Ú©Ù†ÛŒØ¯ØŸ')) {
                try {
                    // Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø±Ø¯
                    // Ø¨Ø§ÛŒØ¯ ÙˆØ¶Ø¹ÛŒØª ØªØ±Ø§Ú©Ù†Ø´ Ø±Ø§ Ø¨Ù‡ rejected ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯
                    
                    showNotification('ÙˆØ§Ø±ÛŒØ² Ø±Ø¯ Ø´Ø¯', 'success');
                    closeModal('modalConfirmDeposit');
                    loadPendingDeposits();
                    
                } catch (error) {
                    console.error('âŒ Reject deposit error:', error);
                    showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø±Ø¯ ÙˆØ§Ø±ÛŒØ²', 'error');
                }
            }
        }
        
        function showFinancialTab(tabName) {
            // Ø¢Ù¾Ø¯ÛŒØª ØªØ¨â€ŒÙ‡Ø§
            document.querySelectorAll('#adminPageFinancial .admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØªØ¨â€ŒÙ‡Ø§
            document.querySelectorAll('#adminPageFinancial .admin-tab-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // Ù†Ù…Ø§ÛŒØ´ ØªØ¨ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±
            const tabContent = document.getElementById('financialTab' + capitalizeFirstLetter(tabName));
            if (tabContent) {
                tabContent.style.display = 'block';
            }
        }
        
        // ØªØ§Ø¨Ø¹ Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
        function searchUsers() {
            const searchTerm = document.getElementById('searchUserInput').value;
            usersPage = 1;
            loadUsers(searchTerm);
        }
        
        // ØªØ§Ø¨Ø¹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨ÛŒØ´ØªØ±
        function loadMoreUsers() {
            usersPage++;
            loadUsers();
        }
    </script>
</body>
</html>
