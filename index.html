<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SODmAX Pro | ุงุณุชุฎุฑุงุฌ ุญุฑููโุง ุจุง ูพุงุฏุงุด USDT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ุตูุญู ุซุจุช ูุงู -->
    <div class="register-overlay" id="registerOverlay">
        <div class="register-container">
            <div class="register-header">
                <div class="register-icon">โ๏ธ</div>
                <h1 class="register-title">ุซุจุช ูุงู ุฏุฑ SODmAX</h1>
                <p class="register-subtitle">ุจุฑุง ุดุฑูุน ุงุณุชุฎุฑุงุฌ ู ุฏุฑุงูุช ูพุงุฏุงุด USDT ุซุจุช ูุงู ฺฉูุฏ</p>
            </div>

            <form id="registerForm">
                <div class="form-group">
                    <label class="form-label">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ</label>
                    <input type="text" class="form-input" placeholder="ูุซุงู: ุนู ูุญูุฏ" id="fullName" required>
                </div>

                <div class="form-group">
                    <label class="form-label">ุงูู</label>
                    <input type="email" class="form-input" placeholder="example@gmail.com" id="email" required>
                </div>

                <div class="form-group">
                    <label class="form-label">ฺฉุฏ ุฏุนูุช (ุงุฎุชุงุฑ)</label>
                    <input type="text" class="form-input" placeholder="ฺฉุฏ ุฏูุณุช ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ" id="referralCode">
                </div>

                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-user-plus"></i>
                    ุซุจุช ูุงู ู ุดุฑูุน ุงุณุชุฎุฑุงุฌ
                </button>

                <div style="text-align: center; margin-top: 20px; color: var(--text-secondary); font-size: 12px;">
                    ุจุง ุซุจุช ูุงูุ <a href="#" onclick="showTerms()" style="color: var(--primary-light);">ููุงูู ู ุดุฑุงุท</a> ุฑุง ูโูพุฐุฑุฏ
                </div>
            </form>
        </div>
    </div>

    <!-- ฺฉุงูุชูุฑ ุงุตู -->
    <div class="container" id="mainContainer" style="display: none;">
        <!-- ูุงูุจุฑ -->
        <nav class="navbar">
            <div class="nav-background"></div>
            
            <a href="#" class="logo">
                <div class="logo-icon">โ๏ธ</div>
                <div class="logo-text">
                    <div class="logo-title">SODmAX Pro</div>
                    <div class="logo-subtitle">ุงุณุชุฎุฑุงุฌ ููุดููุฏ โข ูพุงุฏุงุด ูุงูุน</div>
                </div>
            </a>

            <!-- ููู navigation -->
            <div class="nav-menu">
                <a href="dashboard.html">
                    <i class="fas fa-chart-line"></i>
                    <span class="nav-text">ุฏุงุดุจูุฑุฏ</span>
                </a>
                <a href="leaderboard.html">
                    <i class="fas fa-trophy"></i>
                    <span class="nav-text">ูุฏุฑุจุฑุฏ</span>
                </a>
                <a href="missions.html">
                    <i class="fas fa-tasks"></i>
                    <span class="nav-text">ูุฃููุฑุชโูุง</span>
                </a>
                <!-- ููฺฉ ูุฏุฑุช - ููุท ุจุฑุง ุงุฏูู ููุงุด ุฏุงุฏู ูโุดูุฏ -->
                <a href="admin.html" id="adminLink" style="display: none; background: rgba(148,163,184,0.3);">
                    <i class="fas fa-user-shield"></i>
                    <span class="nav-text">ูุฏุฑุช</span>
                </a>
            </div>

            <div class="wallet-section">
                <div class="wallet-row">
                    <div class="wallet-card">
                        <div class="wallet-label">
                            <i class="fas fa-coins"></i>
                            ููุฌูุฏ SOD
                        </div>
                        <div class="wallet-amount" id="sodBalance">ฐ <span>SOD</span></div>
                    </div>
                    
                    <div class="wallet-card">
                        <div class="wallet-label">
                            <i class="fas fa-gem"></i>
                            ููุฌูุฏ USDT
                        </div>
                        <div class="wallet-amount" id="usdtBalance">ฐ <span>USDT</span></div>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="SODmAX.showSODSale()">
                    <i class="fas fa-shopping-cart"></i>
                    ุฎุฑุฏ SOD
                </button>
            </div>
        </nav>

        <!-- ุจุฎุด ูุงูุฑ -->
        <section class="miner-section">
            <div class="section-header">
                <h1 class="section-title">ุงุณุชุฎุฑุงุฌ ููุดููุฏ SOD</h1>
                <p class="section-subtitle">
                    ุจุง ูพุดุฑูุชูโุชุฑู ุณุณุชู ุงุณุชุฎุฑุงุฌ ูุจณุ ูุฑ ฺฉูฺฉ ุดูุง <span class="highlight">SOD</span> ุชููุฏ ูโฺฉูุฏ.
                    ูุฑ <span class="highlight">ฑฐ ูููู SOD</span> ูุนุงุฏู <span class="highlight">ฐ.ฐฑ USDT (ฑ ุณููุช)</span> ูพุฑุฏุงุฎุช ูโุดูุฏ.
                </p>
            </div>

            <div class="miner-container">
                <!-- ูุงูุฑ ูู -->
                <div class="miner-view">
                    <div class="miner-display">
                        <div class="miner-core" id="minerCore">
                            <div class="core-inner">
                                <div class="core-content">
                                    <div class="core-icon">โก</div>
                                    <div class="click-reward" id="clickReward">+ฑฐฐ SOD</div>
                                    <div class="click-label">ุจุฑุง ุงุณุชุฎุฑุงุฌ ฺฉูฺฉ ฺฉูุฏ</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="miner-controls">
                        <button class="btn btn-primary" id="autoMineBtn">
                            <i class="fas fa-robot"></i>
                            ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ
                        </button>
                        <button class="btn btn-outline" onclick="SODmAX.showSODSale()">
                            <i class="fas fa-shopping-cart"></i>
                            ุฎุฑุฏ SOD
                        </button>
                        <button class="btn btn-success" onclick="SODmAX.boostMining()">
                            <i class="fas fa-bolt"></i>
                            ุงูุฒุงุด ูุฏุฑุช
                        </button>
                    </div>
                </div>

                <!-- ุงุณุชุงุช ูู -->
                <div class="stats-view">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-title">ุฏุฑุขูุฏ ุงูุฑูุฒ</div>
                                <div class="stat-value" id="todayEarnings">ฐ SOD</div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-title">ูุฏุฑุช ุงุณุชุฎุฑุงุฌ</div>
                                <div class="stat-value" id="miningPower">ฑฐx</div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-title">ูุงูุฑูุง ูุนุงู</div>
                                <div class="stat-value">ธ,ดฒฑ</div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-network-wired"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-title">ฺฉู ุงุณุชุฎุฑุงุฌ ุดุจฺฉู</div>
                                <div class="stat-value">ฒด.ตM SOD</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ุจุฎุด ูพููโูุง ูฺู ูุฑูุด SOD -->
        <section class="sod-sale-section" id="sodSaleSection" style="display: none;">
            <div class="section-header">
                <h2 class="section-title">๐ ูพููโูุง ูฺู ูุฑูุด SOD</h2>
                <p class="section-subtitle">
                    SOD ุจุดุชุฑ ุฎุฑุฏุงุฑ ฺฉูุฏ ู ุณุฑุนุช ุงุณุชุฎุฑุงุฌ ุฎูุฏ ุฑุง ุงูุฒุงุด ุฏูุฏ. ูุฑ ูพูู ุดุงูู ูุฒุงุง ูฺูโุง ุงุณุช.
                </p>
            </div>

            <div class="sale-plans-grid" id="salePlansGrid">
                <!-- ูพููโูุง ุจุง JS ุณุงุฎุชู ูโุดููุฏ -->
            </div>
        </section>

        <!-- ุจุฎุด ูพุงุฏุงุด USDT -->
        <section class="reward-section">
            <div class="reward-header">
                <div>
                    <h2 class="reward-title">๐ ูพุงุฏุงุด USDT ูุงูุน</h2>
                    <p class="reward-subtitle">ูุฑ ฑฐ ูููู SOD ูุนุงุฏู <span class="highlight">ฐ.ฐฑ USDT (ฑ ุณููุช)</span> ูพุฑุฏุงุฎุช ูโุดูุฏ.</p>
                </div>
                <button class="btn btn-success" id="claimUSDTBtn">
                    <i class="fas fa-gift"></i>
                    ุฏุฑุงูุช ูพุงุฏุงุด
                </button>
            </div>

            <div class="reward-card">
                <div class="reward-info">
                    <h3><i class="fas fa-wallet"></i> ููุฌูุฏ USDT ุดูุง</h3>
                    <div class="reward-amount" id="availableUSDT">ฐ USDT</div>
                </div>
                <div class="reward-info">
                    <h3><i class="fas fa-bullseye"></i> ุชุง ูพุงุฏุงุด ุจุนุฏ</h3>
                    <div class="reward-amount" id="nextReward">ฐ.ฐฑ USDT</div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-header">
                    <div class="progress-label">ูพุดุฑูุช ูุนู</div>
                    <div class="progress-value" id="progressText">ฐ / ฑฐ,ฐฐฐ,ฐฐฐ SOD (ฐ.ฐฑ USDT)</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <div class="stats-view">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-title">ุขุฎุฑู ุฏุฑุงูุช</div>
                            <div class="stat-value" id="lastClaimTime">ูููุฒ ุฏุฑุงูุช ูฺฉุฑุฏูโุงุฏ</div>
                        </div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-title">ุณุทุญ ุดูุง</div>
                            <div class="stat-value" id="userLevel">ฑ</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ุฌุฏูู ุชุฑุงฺฉูุดโูุง -->
        <section class="transactions-section">
            <div class="section-header">
                <h2 class="section-title">๐ ุชุงุฑุฎฺู ุชุฑุงฺฉูุดโูุง</h2>
                <p class="section-subtitle">ููุงุด ุชูุงู ูุนุงูุชโูุง ุงุณุชุฎุฑุงุฌุ ุฎุฑุฏ ู ุชุฑุงฺฉูุดโูุง ุดูุง</p>
            </div>

            <div class="transactions-table">
                <div id="transactionsList">
                    <!-- ุชุฑุงฺฉูุดโูุง ุจุง JS ุณุงุฎุชู ูโุดููุฏ -->
                </div>
            </div>
        </section>
    </div>

    <!-- ููุชูฺฉุดู -->
    <div class="notification" id="notification">
        <div class="notification-icon">
            <i class="fas fa-check"></i>
        </div>
        <div class="notification-content">
            <h4 id="notificationTitle">ุนููุงุช ูููู</h4>
            <p id="notificationMessage">ูพุงู ููุงุด ุฏุงุฏู ูโุดูุฏ</p>
        </div>
    </div>

    <!-- ููุท ฺฉ ูุงู ุฌุงูุงุงุณฺฉุฑูพุช -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
        // SODmAX Pro - ุชูุงู ฺฉุฏูุง ุฏุฑ ฺฉ ูุงู
        console.log('๐ Loading SODmAX Pro...');
        
        const SODmAX = {
            // ============================================
            // CONFIGURATION
            // ============================================
            SUPABASE_URL: 'https://wxxhulztrxmjqftxcetp.supabase.co',
            SUPABASE_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4eGh1bHp0cnhtanFmdHhjZXRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNzEwNDcsImV4cCI6MjA4MTY0NzA0N30.iC6Ief8aF-zw66RQRSnLxA-BmAjChQj9xy4HkJpGOA4',
            
            supabase: null,
            userData: null,
            gameData: null,
            
            // ============================================
            // INITIALIZATION
            // ============================================
            init() {
                console.log('๐ฎ Initializing SODmAX Pro...');
                
                // ุงุฌุงุฏ ุงุชุตุงู Supabase
                this.initSupabase();
                
                // ุชูุธู ุฏุงุฏูโูุง ุงููู
                this.userData = this.loadUserData();
                this.gameData = this.loadGameData();
                
                // ุงุชุตุงู ุงููุชโูุง
                this.bindEvents();
                
                // ุจุฑุฑุณ ูุถุนุช ฺฉุงุฑุจุฑ
                if (this.userData.isRegistered) {
                    this.hideRegister();
                    this.updateUI();
                    this.showNotification('๐', `ุฎูุด ุขูุฏุฏ ${this.userData.fullName}!`);
                } else {
                    this.showRegister();
                }
                
                console.log('โ SODmAX Pro ready!');
            },
            
            // ============================================
            // SUPABASE FUNCTIONS
            // ============================================
            initSupabase() {
                try {
                    this.supabase = window.supabase.createClient(
                        this.SUPABASE_URL, 
                        this.SUPABASE_KEY
                    );
                    console.log('โ Supabase connected');
                    
                    // ุชุณุช ุงุชุตุงู
                    this.testConnection();
                } catch (error) {
                    console.error('โ Failed to connect to Supabase:', error);
                }
            },
            
            async testConnection() {
                if (!this.supabase) return;
                
                try {
                    const { count, error } = await this.supabase
                        .from('users')
                        .select('*', { count: 'exact', head: true });
                    
                    if (error) {
                        console.warn('โ๏ธ Could not query users table:', error.message);
                        console.log('โน๏ธ This is normal if tables don\'t exist yet');
                    } else {
                        console.log(`๐ Users in database: ${count}`);
                    }
                } catch (error) {
                    console.warn('โ๏ธ Connection test warning:', error.message);
                }
            },
            
            async saveUserToDatabase() {
                if (!this.supabase || !this.userData.userId) return false;
                
                try {
                    console.log('๐พ Saving user to database...');
                    
                    const { error } = await this.supabase
                        .from('users')
                        .upsert({
                            user_id: this.userData.userId,
                            full_name: this.userData.fullName,
                            email: this.userData.email,
                            referral_code: this.userData.referralCode || '',
                            last_login: new Date().toISOString(),
                            is_active: true
                        }, {
                            onConflict: 'user_id'
                        });
                    
                    if (error) {
                        console.warn('โ๏ธ Could not save user to database:', error.message);
                        return false;
                    }
                    
                    console.log('โ User saved to database');
                    return true;
                } catch (error) {
                    console.warn('โ๏ธ Save user error:', error.message);
                    return false;
                }
            },
            
            async saveGameToDatabase() {
                if (!this.supabase || !this.userData.userId) return false;
                
                try {
                    const { error } = await this.supabase
                        .from('game_data')
                        .upsert({
                            user_id: this.userData.userId,
                            sod_balance: this.gameData.sodBalance,
                            usdt_balance: this.gameData.usdtBalance,
                            today_earnings: this.gameData.todayEarnings,
                            mining_power: this.gameData.miningPower,
                            user_level: this.gameData.userLevel,
                            usdt_progress: this.gameData.usdtProgress,
                            total_mined: this.gameData.totalMined,
                            updated_at: new Date().toISOString()
                        }, {
                            onConflict: 'user_id'
                        });
                    
                    if (error) {
                        console.warn('โ๏ธ Could not save game data:', error.message);
                        return false;
                    }
                    
                    return true;
                } catch (error) {
                    console.warn('โ๏ธ Save game error:', error.message);
                    return false;
                }
            },
            
            async logTransaction(type, amount, currency, description) {
                if (!this.supabase || !this.userData.userId) return;
                
                try {
                    await this.supabase
                        .from('transactions')
                        .insert({
                            user_id: this.userData.userId,
                            type: type,
                            amount: amount,
                            currency: currency,
                            description: description,
                            created_at: new Date().toISOString()
                        });
                } catch (error) {
                    console.warn('โ๏ธ Could not log transaction:', error.message);
                }
            },
            
            // ============================================
            // USER MANAGEMENT
            // ============================================
            loadUserData() {
                const saved = localStorage.getItem('sodmax_user');
                if (saved) {
                    try {
                        return JSON.parse(saved);
                    } catch (error) {
                        console.warn('โ๏ธ Could not parse saved user data');
                    }
                }
                
                return {
                    isRegistered: false,
                    fullName: "",
                    email: "",
                    userId: null,
                    referralCode: ""
                };
            },
            
            loadGameData() {
                const saved = localStorage.getItem('sodmax_game');
                if (saved) {
                    try {
                        return JSON.parse(saved);
                    } catch (error) {
                        console.warn('โ๏ธ Could not parse saved game data');
                    }
                }
                
                return {
                    sodBalance: 0,
                    usdtBalance: 0,
                    todayEarnings: 0,
                    miningPower: 10,
                    userLevel: 1,
                    usdtProgress: 0,
                    autoMining: false,
                    boostActive: false,
                    totalMined: 0
                };
            },
            
            saveUserData() {
                localStorage.setItem('sodmax_user', JSON.stringify(this.userData));
            },
            
            saveGameData() {
                localStorage.setItem('sodmax_game', JSON.stringify(this.gameData));
                
                // ุฐุฎุฑู ุฏุฑ ุฏุชุงุจุณ ูู
                this.saveGameToDatabase();
            },
            
            // ============================================
            // REGISTRATION
            // ============================================
            async handleRegistration(e) {
                e.preventDefault();
                
                const fullName = document.getElementById('fullName').value.trim();
                const email = document.getElementById('email').value.trim();
                const referralCode = document.getElementById('referralCode').value.trim();
                
                if (!fullName || !email) {
                    this.showNotification('โ', 'ูุทูุงู ูุงู ู ุงูู ุฑุง ูุงุฑุฏ ฺฉูุฏ');
                    return;
                }
                
                this.showNotification('โณ', 'ุฏุฑ ุญุงู ุซุจุช ูุงู...');
                
                // ุงุฌุงุฏ ฺฉุงุฑุจุฑ
                const userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                
                this.userData = {
                    isRegistered: true,
                    fullName: fullName,
                    email: email,
                    userId: userId,
                    referralCode: referralCode
                };
                
                // ุฏุงุฏูโูุง ุงููู ุจุงุฒ
                this.gameData = {
                    sodBalance: 1000000,
                    usdtBalance: 0,
                    todayEarnings: 0,
                    miningPower: 10,
                    userLevel: 1,
                    usdtProgress: 1000000,
                    autoMining: false,
                    boostActive: false,
                    totalMined: 0
                };
                
                // ุฐุฎุฑู ุฏุฑ localStorage
                this.saveUserData();
                this.saveGameData();
                
                // ุฐุฎุฑู ุฏุฑ ุฏุชุงุจุณ
                await this.saveUserToDatabase();
                await this.logTransaction('bonus', 1000000, 'SOD', 'ุณฺฉู ูุฏู ุซุจุช ูุงู');
                
                this.showNotification('โ', `ุซุจุช ูุงู ูููู! ุฎูุด ุขูุฏุฏ ${fullName}!`);
                
                setTimeout(() => {
                    this.hideRegister();
                    this.updateUI();
                }, 1500);
            },
            
            // ============================================
            // GAME LOGIC
            // ============================================
            manualMine() {
                if (!this.userData.isRegistered) {
                    this.showNotification('โ', 'ุงุจุชุฏุง ุซุจุช ูุงู ฺฉูุฏ');
                    return;
                }
                
                const earned = this.gameData.miningPower;
                if (this.gameData.boostActive) earned *= 3;
                
                // ุขูพุฏุช ุฏุงุฏูโูุง
                this.gameData.sodBalance += earned;
                this.gameData.totalMined += earned;
                this.gameData.todayEarnings += earned;
                this.gameData.usdtProgress += earned;
                
                // ุฐุฎุฑู
                this.saveGameData();
                this.logTransaction('mining', earned, 'SOD', 'ุงุณุชุฎุฑุงุฌ ุฏุณุช');
                
                // ุขูพุฏุช UI
                this.updateUI();
                
                // ุงูฺฉุช
                this.createMiningEffect(earned);
                
                // ุจุฑุฑุณ ูพุงุฏุงุด USDT
                this.checkUSDT();
            },
            
            checkUSDT() {
                if (this.gameData.usdtProgress >= 10000000) {
                    const usdtEarned = 0.01;
                    
                    this.gameData.usdtBalance += usdtEarned;
                    this.gameData.usdtProgress -= 10000000;
                    
                    this.showNotification('๐', `${usdtEarned.toFixed(4)} USDT ุฏุฑุงูุช ฺฉุฑุฏุฏ!`);
                    this.saveGameData();
                    this.logTransaction('usdt_reward', usdtEarned, 'USDT', 'ูพุงุฏุงุด ุงุณุชุฎุฑุงุฌ');
                    
                    // ุดุงูุณ ุงุฑุชูุงุก ุณุทุญ
                    if (Math.random() > 0.85) {
                        this.gameData.userLevel++;
                        this.gameData.miningPower = 10 * this.gameData.userLevel;
                        this.showNotification('โญ', `ุณุทุญ ุดูุง ุจู ${this.gameData.userLevel} ุงุฑุชูุงุก ุงูุช!`);
                        this.saveGameData();
                    }
                }
            },
            
            claimUSDT() {
                if (this.gameData.usdtBalance > 0) {
                    const usdtToClaim = this.gameData.usdtBalance;
                    const sodNeeded = usdtToClaim * 1000000000;
                    
                    if (this.gameData.sodBalance >= sodNeeded) {
                        if (confirm(`ุขุง ูุงู ุจู ุฏุฑุงูุช ${usdtToClaim.toFixed(4)} USDT ูุณุชุฏุ\n${this.formatNumber(sodNeeded)} SOD ุงุฒ ููุฌูุฏ ฺฉุณุฑ ุฎูุงูุฏ ุดุฏ.`)) {
                            this.gameData.usdtBalance = 0;
                            this.gameData.sodBalance -= sodNeeded;
                            
                            this.showNotification('โ', `${usdtToClaim.toFixed(4)} USDT ุฏุฑุงูุช ุดุฏ.`);
                            this.saveGameData();
                            this.logTransaction('withdrawal', usdtToClaim, 'USDT', 'ุจุฑุฏุงุดุช USDT');
                            this.updateUI();
                        }
                    } else {
                        this.showNotification('โ๏ธ', `ููุฌูุฏ SOD ฺฉุงู ูุณุช. ูุงุฒ: ${this.formatNumber(sodNeeded)} SOD`);
                    }
                } else {
                    this.showNotification('๐ฐ', 'ูููุฒ USDT ูพุงุฏุงุด ุฏุฑุงูุช ูฺฉุฑุฏูโุงุฏ.');
                }
            },
            
            boostMining() {
                if (this.gameData.sodBalance >= 5000) {
                    this.gameData.sodBalance -= 5000;
                    this.gameData.boostActive = true;
                    this.gameData.miningPower *= 3;
                    
                    this.showNotification('โก', 'ูุฏุฑุช ุงุณุชุฎุฑุงุฌ ณ ุจุฑุงุจุฑ ุดุฏ! (ณฐ ุฏููู)');
                    this.saveGameData();
                    this.updateUI();
                    
                    setTimeout(() => {
                        this.gameData.boostActive = false;
                        this.gameData.miningPower = 10 * this.gameData.userLevel;
                        this.showNotification('โฐ', 'ุฒูุงู ุงูุฒุงุด ูุฏุฑุช ุจู ูพุงุงู ุฑุณุฏ.');
                        this.saveGameData();
                        this.updateUI();
                    }, 30 * 60 * 1000);
                } else {
                    this.showNotification('โ๏ธ', 'ุจุฑุง ุงูุฒุงุด ูุฏุฑุช ุจู ตฐฐฐ SOD ูุงุฒ ุฏุงุฑุฏ.');
                }
            },
            
            // ============================================
            // UI FUNCTIONS
            // ============================================
            showNotification(title, message) {
                const notification = document.getElementById('notification');
                const titleEl = document.getElementById('notificationTitle');
                const messageEl = document.getElementById('notificationMessage');
                
                if (notification && titleEl && messageEl) {
                    titleEl.textContent = title;
                    messageEl.textContent = message;
                    
                    notification.classList.add('show');
                    
                    setTimeout(() => {
                        notification.classList.remove('show');
                    }, 4000);
                }
            },
            
            formatNumber(num) {
                if (num >= 1000000000) return (num / 1000000000).toFixed(2) + 'B';
                if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
                if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
                return Math.floor(num).toLocaleString('fa-IR');
            },
            
            updateUI() {
                // ููุฌูุฏโูุง
                document.getElementById('sodBalance').innerHTML = 
                    this.formatNumber(this.gameData.sodBalance) + ' <span>SOD</span>';
                
                document.getElementById('usdtBalance').innerHTML = 
                    this.gameData.usdtBalance.toFixed(4) + ' <span>USDT</span>';
                
                // ุขูุงุฑ
                document.getElementById('todayEarnings').textContent = 
                    this.formatNumber(this.gameData.todayEarnings) + ' SOD';
                
                document.getElementById('miningPower').textContent = 
                    this.gameData.miningPower + 'x';
                
                document.getElementById('clickReward').textContent = 
                    '+' + this.gameData.miningPower + ' SOD';
                
                document.getElementById('userLevel').textContent = 
                    this.gameData.userLevel;
                
                // ูพุงุฏุงุด USDT
                document.getElementById('availableUSDT').textContent = 
                    this.gameData.usdtBalance.toFixed(4) + ' USDT';
                
                const progressPercent = (this.gameData.usdtProgress / 10000000) * 100;
                document.getElementById('progressFill').style.width = progressPercent + '%';
                
                document.getElementById('progressText').textContent = 
                    this.formatNumber(this.gameData.usdtProgress) + ' / ฑฐ,ฐฐฐ,ฐฐฐ SOD (ฐ.ฐฑ USDT)';
            },
            
            createMiningEffect(amount) {
                const effect = document.createElement('div');
                effect.style.cssText = `
                    position: fixed;
                    color: var(--primary-light);
                    font-weight: 900;
                    font-size: 16px;
                    pointer-events: none;
                    z-index: 10000;
                    text-shadow: 0 0 10px var(--primary);
                    animation: miningEffect 1s ease-out forwards;
                `;
                
                const core = document.getElementById('minerCore');
                const rect = core.getBoundingClientRect();
                effect.style.left = rect.left + rect.width / 2 + 'px';
                effect.style.top = rect.top + rect.height / 2 + 'px';
                effect.textContent = '+' + this.formatNumber(amount);
                
                document.body.appendChild(effect);
                
                setTimeout(() => effect.remove(), 1000);
            },
            
            hideRegister() {
                document.getElementById('registerOverlay').style.display = 'none';
                document.getElementById('mainContainer').style.display = 'block';
            },
            
            showRegister() {
                document.getElementById('registerOverlay').style.display = 'flex';
                document.getElementById('mainContainer').style.display = 'none';
            },
            
            showSODSale() {
                this.showNotification('๐', 'ูุฑูุดฺฏุงู SOD ุฏุฑ ุญุงู ุชูุณุนู ุงุณุช');
            },
            
            // ============================================
            // EVENT BINDING
            // ============================================
            bindEvents() {
                // ุซุจุช ูุงู
                document.getElementById('registerForm').addEventListener('submit', 
                    (e) => this.handleRegistration(e));
                
                // ฺฉูฺฉ ุงุณุชุฎุฑุงุฌ
                document.getElementById('minerCore').addEventListener('click', 
                    () => this.manualMine());
                
                // ุฏุฑุงูุช ูพุงุฏุงุด
                document.getElementById('claimUSDTBtn').addEventListener('click', 
                    () => this.claimUSDT());
                
                // ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ
                document.getElementById('autoMineBtn').addEventListener('click', () => {
                    if (this.gameData.sodBalance < 1000000) {
                        this.showNotification('โ๏ธ', 'ุจุฑุง ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ ุญุฏุงูู ฑ ูููู SOD ูุงุฒ ุฏุงุฑุฏ.');
                        return;
                    }
                    
                    this.gameData.autoMining = !this.gameData.autoMining;
                    
                    if (this.gameData.autoMining) {
                        this.autoMineBtn.innerHTML = '<i class="fas fa-pause"></i> ุชููู ุฎูุฏฺฉุงุฑ';
                        this.autoMineBtn.style.background = 'var(--error)';
                        this.showNotification('๐ค', 'ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ ูุนุงู ุดุฏ.');
                    } else {
                        this.autoMineBtn.innerHTML = '<i class="fas fa-robot"></i> ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ';
                        this.autoMineBtn.style.background = '';
                        this.showNotification('โธ๏ธ', 'ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ ูุชููู ุดุฏ.');
                    }
                });
            }
        };
        
        // ุดุฑูุน ุจุฑูุงูู
        document.addEventListener('DOMContentLoaded', () => {
            SODmAX.init();
        });
        
        // ุชูุงุจุน ฺฏููุจุงู ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ HTML
        window.SODmAX = SODmAX;
        window.boostMining = () => SODmAX.boostMining();
        window.showSODSale = () => SODmAX.showSODSale();
    </script>
</body>
</html>
